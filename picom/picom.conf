# Config optimizada para rendimiento
# - Prioriza vsync y uso de GL para minimizar tearing
# - Reduce trabajo: sin blur, sin sombras costosas, fading deshabilitado
# - Permite que la terminal controle su propia transparencia (no forzar opacidad)
# Ajusta según tu hardware/driver (NVIDIA/Intel/AMD pueden requerir cambios).

backend = "glx";
vsync = true;                    # habilita sincronización vertical para evitar tearing
glx-no-stencil = true;
glx-no-rebind-pixmap = true;     # reduce cargas/rebinds innecesarios
# glx-swap-method removed; use-damage=true is preferred on modern picom

use-damage = true;               # sólo repintar las áreas cambiadas
unredir-if-possible = true;      # desactiva compositor para fullscreen apps cuando sea posible
paint-on-overlay = false;        # evita problemas en drivers viejos

# Opacidades básicas (opaco por defecto)
active-opacity = 1.0;
inactive-opacity = 1.0;
frame-opacity = 1.0;
inactive-opacity-override = false;

# Efectos reducidos para rendimiento
shadow = false;                  # evita sombras (puede re-activar si las necesitas)
fading = false;                  # desactiva fading
no-fading-openclose = true;

# Sin blur para menor carga GPU
blur-background = false;
blur-strength = 0;

# Reglas de opacidad vacías aquí: dejamos que la terminal gestione su propia transparencia
opacity-rule = [
   # ejemplo: "90:class_g = 'Rofi'",
];

# Ajustes para compatibilidad y rendimiento
detect-client-opacity = true;
detect-transient = true;
detect-rounded-corners = true;

# Window type settings
wintypes:
{
   dock = { shadow = false; };
   popup_menu = { shadow = false; };
};

# Sincronización del render
xrender-sync-fence = true;

# Exclusiones (ejemplos comentados)
#corner-radius-exclude = [ "window_type = 'dock'" ];

# Nota: Si experimentas tearing, prueba a cambiar vsync=false o ajustar use-damage
