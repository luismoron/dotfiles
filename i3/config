# Este archivo ha sido autogenerado por i3-config-wizard(1).
# No será sobrescrito, edítalo como desees.
#
# Si cambias el diseño de tu teclado, elimina
# este archivo y ejecuta de nuevo i3-config-wizard(1).
#
# Archivo de configuración de i3 (v4)
#
# Referencia completa: https://i3wm.org/docs/userguide.html

exec --no-startup-id systemctl start --user workstyle.service

#####################
##  Teclas por defecto  ##
#####################

set $mod Mod4

# Usa Mouse+$mod para mover ventanas flotantes
floating_modifier $mod

# Iniciar terminal
bindsym $mod+Shift+Return exec --no-startup-id alacritty

# Terminal desplegable
bindsym $mod+Return exec --no-startup-id xfce4-terminal --drop-down

# Cerrar ventana enfocada
bindsym $mod+q kill

# Bloquear pantalla
bindsym $mod+9 exec --no-startup-id blurlock

# Apagar, reiniciar y bloquear
bindsym $mod+0 mode "$mode_system"
set $mode_system Presiona teclas para: Bloquear (l), Salir (e), Cambiar usuario (u), Suspender (s), Hibernar (H), Reiniciar (r), Apagar (Shift+s)
mode "$mode_system" {
        bindsym l        exec --no-startup-id blurlock, mode "default"
        bindsym s        exec --no-startup-id i3exit suspend, mode "default"
        bindsym u        exec --no-startup-id i3exit switch_user, mode "default"
        bindsym e        exec --no-startup-id i3exit logout, mode "default"
        bindsym h        exec --no-startup-id i3exit hibernate, mode "default"
        bindsym r        exec --no-startup-id i3exit reboot, mode "default"
        bindsym Shift+s  exec --no-startup-id i3exit shutdown, mode "default"
        bindsym Return   mode "default"
        bindsym Escape   mode "default"
}

##########################
## Iniciar apps y menú  ##
##########################

# Iniciar dmenu (lanzador de programas)
bindsym $mod+d exec --no-startup-id "dmenu_run -nf '#F9FAF9' -nb '#0F2235' -sb '#005577' -sf '#FEFEFE' -fn 'Roboto 10'"

# Iniciar Rofi
bindsym $mod+Shift+d exec --no-startup-id rofi -show drun -show-icons

########################
##  Fuentes escritorio  ##
########################

# Fuente para títulos de ventana y barra
font xft:URWGothic-Book 11

########################
##  Inicio escritorio  ##
########################

# Ejecutar autostart de XDG usando dex
exec --no-startup-id dex-autostart --autostart --environment i3

# Bloqueo de pantalla antes de suspender
exec --no-startup-id xss-lock --transfer-sleep-lock -- blurlock --nofork

##############################
##  Recargar/Reiniciar i3   ##
##############################

# Recargar configuración
bindsym $mod+Shift+c reload

# Reiniciar i3
bindsym $mod+Shift+r restart

########################
##  Aplicaciones iniciales  ##
########################

exec --no-startup-id pkill picom
exec --no-startup-id nm-applet
exec --no-startup-id pa-applet
exec --no-startup-id sleep 1; picom --daemon
exec --no-startup-id start_conky --daemonize
exec --no-startup-id clipit
exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec --no-startup-id xdg-user-dirs-update
exec --no-startup-id blueman-applet
exec --no-startup-id firewall-applet
exec --no-startup-id pa-notify
exec_always --no-startup-id workstyle

#######################
##  Atajos de apps    ##
#######################

# Iniciar aplicaciones
bindsym $mod+F2         exec firefox
bindsym $mod+F3         exec geary
bindsym $mod+t          exec --no-startup-id pkill picom
bindsym $mod+Ctrl+t     exec --no-startup-id picom -b
bindsym $mod+Ctrl+d --release exec "killall dunst; exec notify-send 'reiniciar dunst'"
bindsym $mod+Shift+t    exec telegram
bindsym $mod+Shift+m    exec spotify
bindsym $mod+Shift+e    exec thunar

# Captura de pantalla
bindsym F11             exec --no-startup-id i3-scrot
bindsym $mod+Mod1+p     exec --no-startup-id i3-scrot
bindsym $mod+Mod1+o     exec --no-startup-id i3-scrot -dc
bindsym $mod+Mod1+l --release exec --no-startup-id i3-scrot -s
bindsym $mod+mod1+k --release exec --no-startup-id i3-scrot -sc
bindsym $mod+Ctrl+x --release exec --no-startup-id xkill

########################
##  Teclas multimedia  ##
########################

bindsym $mod+Ctrl+m exec pavucontrol-qt

# Control de volumen con pactl
set $refresh_i3status killall -SIGUSR1 i3status
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10%
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10%
bindsym XF86AudioMute       exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute    exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Control de reproductor multimedia
bindsym XF86AudioPlay  exec playerctl play-pause
bindsym XF86AudioPause exec playerctl play-pause
bindsym XF86AudioNext  exec playerctl next
bindsym XF86AudioPrev  exec playerctl previous

# Control de brillo
bindsym XF86MonBrightnessUp   exec --no-startup-id brightnessctl s +10%
bindsym XF86MonBrightnessDown exec --no-startup-id brightnessctl s 10%-

########################
##  Teclas de navegación  ##
########################

# Cambiar foco
bindsym $mod+j         focus left
bindsym $mod+k         focus down
bindsym $mod+l         focus up
bindsym $mod+semicolon focus right

# También con flechas
bindsym $mod+Left      focus left
bindsym $mod+Down      focus down
bindsym $mod+Up        focus up
bindsym $mod+Right     focus right

# Mover ventana enfocada
bindsym $mod+Shift+j         move left
bindsym $mod+Shift+k         move down
bindsym $mod+Shift+l         move up
bindsym $mod+Shift+semicolon move right

# También con flechas
bindsym $mod+Shift+Left  move left
bindsym $mod+Shift+Down  move down
bindsym $mod+Shift+Up    move up
bindsym $mod+Shift+Right move right

# Orientación de división
bindsym $mod+h split h;exec notify-send 'dividir horizontalmente'
bindsym $mod+v split v;exec notify-send 'dividir verticalmente'
bindsym $mod+Shift+q split toggle

# Ir y volver entre espacios de trabajo
workspace_auto_back_and_forth yes
bindsym $mod+b workspace back_and_forth
bindsym $mod+Shift+b move container to workspace number back_and_forth; workspace back_and_forth

# Pantalla completa
bindsym $mod+f fullscreen toggle

# Cambiar diseño de contenedor
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Alternar entre flotante y mosaico
bindsym $mod+Shift+space floating toggle

# Cambiar foco entre ventanas flotantes y en mosaico
bindsym $mod+space focus mode_toggle

# Foco al contenedor padre
bindsym $mod+a focus parent

# Mover ventana al scratchpad
bindsym $mod+Shift+minus move scratchpad

# Mostrar/ocultar scratchpad
bindsym $mod+minus scratchpad show

# Alternar sticky
bindsym $mod+Shift+s sticky toggle

########################
##  Espacios de trabajo  ##
########################

# Nombres de espacios de trabajo
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"

# Cambiar a espacio de trabajo
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8

# Mover ventana al espacio de trabajo
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8

# Navegar entre espacios de trabajo
bindsym $mod+Ctrl+Right workspace next
bindsym $mod+Ctrl+Left  workspace prev

#############################
### Configuración i3-gaps ###
#############################

# Gaps internos/externos
gaps inner 12
gaps outer -2

# Gaps inteligentes
smart_gaps on

# Bordes inteligentes
smart_borders on
default_border pixel 4

# Modo de gaps
set $mode_gaps Gaps: (o) externo, (i) interno
set $mode_gaps_outer Gaps externos: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Gaps internos: +|-|0 (local), Shift + +|-|0 (global)
bindsym $mod+Shift+g mode "$mode_gaps"

mode "$mode_gaps" {
        bindsym o      mode "$mode_gaps_outer"
        bindsym i      mode "$mode_gaps_inner"
        bindsym Return mode "default"
        bindsym Escape mode "default"
}
mode "$mode_gaps_inner" {
        bindsym plus         gaps inner current plus 5
        bindsym minus        gaps inner current minus 5
        bindsym 0            gaps inner current set 0
        bindsym Shift+plus   gaps inner all plus 5
        bindsym Shift+minus  gaps inner all minus 5
        bindsym Shift+0      gaps inner all set 0
        bindsym Return       mode "default"
        bindsym Escape       mode "default"
}
mode "$mode_gaps_outer" {
        bindsym plus         gaps outer current plus 5
        bindsym minus        gaps outer current minus 5
        bindsym 0            gaps outer current set 0
        bindsym Shift+plus   gaps outer all plus 5
        bindsym Shift+minus  gaps outer all minus 5
        bindsym Shift+0      gaps outer all set 0
        bindsym Return       mode "default"
        bindsym Escape       mode "default"
}

########################
### Ventanas flotantes ###
########################

# Abrir aplicaciones específicas en modo flotante
for_window [title="alsamixer"]floating enable sticky enable
for_window [class="Clipgrab"] floating enable
for_window [title="File Transfer*"] floating enable
for_window [class="fpakman"] floating enable
for_window [class="GParted"] floating enable border normal
for_window [title="i3_help"] floating enable sticky enable border normal
for_window [class="Lightdm-settings"] floating enable
for_window [class="Lxappearance"] floating enable border normal
for_window [title="MuseScore: Play Panel"] floating enable
for_window [class="Nitrogen"] floating enable sticky enable border normal
for_window [class="Oblogout"] fullscreen enable
for_window [class="Pavucontrol"] floating enable
for_window [class="Qtconfig-qt4"] floating enable border normal
for_window [class="qt5ct"] floating enable sticky enable border normal
for_window [class="Simple-scan"] floating enable border normal
for_window [class="(?i)System-config-printer.py"] floating enable border normal
for_window [class="Skype"] floating enable border normal
for_window [class="Timeset-gui"] floating enable border normal
for_window [class="(?i)virtualbox"] floating enable border normal
for_window [class="Xfburn"] floating enable
for_window [title="Kvantummanager"] floating enable
for_window [instance="crx__jgeocpdicgmkeemopbanhokmhcgcflmi"] floating enable
for_window [instance="crx__eilembjdkfgodjkcjnpgpaenohkicgjd"] floating enable
for_window [class="TeamViewer"] floating enable
for_window [class="jdownloader"] floating enable
for_window [class="dnfdragora"] floating enable
for_window [class="Spotify"] floating enable sticky enable
for_window [class="Blueman-manager"] floating enable
for_window [class="FileZilla"] floating enable
for_window [class="com.github.tchx84.Flatseal"] floating enable
for_window [class="Mailspring"] floating enable
for_window [class="pgadmin4"] floating enable
for_window [class="discord"] floating enable
for_window [class="TelegramDesktop"] floating enable
for_window [class="Postman"] floating enable
for_window [class="MongoDB Compass"] floating enable
for_window [class="org.gnome.Software"] floating enable
for_window [class="zoom" instance="zoom.real"] floating enable
for_window [class="NickvisionTubeConverter.GNOME"] floating enable
for_window [class="gnome-calculator"] floating enable
for_window [class="Geary"] floating enable
for_window [class="GitHub Desktop"] floating enable
for_window [class="Setroubleshoot"] floating enable
for_window [class="jetbrains-studio" window_type="splash" ] floating enable
for_window [class="jetbrains-studio" title="Android Studio Setup Wizard"] floating enable
for_window [class="jetbrains-studio" title="Import Android Studio Settings"] floating enable
for_window [class="firefox" id=41943117 instance="Devtools"] floating enable
for_window [class="firefox"  instance="Places"] floating enable
for_window [class="firefox"  instance="Devtools"] floating enable
for_window [class="whatsdesk" instance="whatsdesk" title="WhatsDesk" window_role="browser-window"] floating enable
for_window [class="Anydesk"] floating enable
for_window [class="bruno" instance="bruno" title="bruno" window_role="browser-window"] floating enable
for_window [class="transmission" instance="transmission-qt" title="Transmission"] floating enable
for_window [class="jetbrains-studio" id=69206082 instance="jetbrains-studio" title=" "] floating enable
for_window [class="Google-chrome" instance="127.0.0.1" title="Codeium Chat" window_role="pop-up"] floating enable
for_window [class="MANGO-dev-linux-amd64" ] floating enable
for_window [class="YouTube Music"] floating enable
for_window [class="Protonvpn" instance="protonvpn" title="Proton VPN"] floating enable
for_window [class="gnome-software" instance="gnome-software" title="Software"] floating enable
for_window [class="Bitwarden" instance="bitwarden" title="Bitwarden" window_role="browser-window"] floating enable
for_window [class="Brave-browser" title="Bitwarden" window_role="pop-up"] floating enable

# Cambiar automáticamente al espacio de trabajo con ventana urgente
for_window [urgent=latest] focus

##############################
##  Asignar apps a espacios  ##
##############################

# Asignar aplicaciones a espacios de trabajo específicos
# assign [class="Thunderbird"] $ws1
# assign [class="Pcmanfm"] $ws3
# assign [class="Skype"] $ws5

######################
##  Bordes y estilos  ##
######################

# Configurar estilo de borde
default_border none
default_floating_border normal

# Ocultar bordes
hide_edge_borders none

# Cambiar bordes
bindsym $mod+u border none
bindsym $mod+y border pixel 1
bindsym $mod+n border normal

bindsym $mod+r mode "resize"

# Redimensionar ventana
mode "resize" {
        bindsym j         resize shrink width 10 px or 10 ppt
        bindsym k         resize grow height 10 px or 10 ppt
        bindsym l         resize shrink height 10 px or 10 ppt
        bindsym semicolon resize grow width 10 px or 10 ppt
        bindsym Left      resize shrink width 10 px or 10 ppt
        bindsym Down      resize grow height 10 px or 10 ppt
        bindsym Up        resize shrink height 10 px or 10 ppt
        bindsym Right     resize grow width 10 px or 10 ppt
        bindsym Return    mode "default"
        bindsym Escape    mode "default"
        bindsym $mod+r    mode "default"
}

##########################
##  Tema i3 Desktop    ##
##########################

# Colores del tema (adaptados de la imagen de Fedora)
  client.focused          #007bff #0056b3 #ffffff #007bff   #0056b3
  client.focused_inactive #0056b3 #ffffff #007bff #cc6633
  client.unfocused        #0056b3 #007bff #ff007f #cc6633
  client.urgent           #ff6600 #ffffff #007bff #00ffff
  client.placeholder      #000000 #0056b3 #ffffff #000000
  client.background       #0056b3

###########################
##  Barra de estado      ##
###########################

# Ocultar/mostrar barra i3status
bindsym $mod+m bar mode toggle

# Iniciar i3bar
bar {
        font xft:Roboto 11
        status_command i3status -c $HOME/Plantillas/dotfiles/i3status/i3status.conf | $HOME/Plantillas/dotfiles/i3status/i3spotifystatus/pystatus.py
        tray_output eDP
        colors {
                background #00244c
                statusline #fefefe
                separator  #454947
                focused_workspace  #d5d2e2 #005296 #ffffff
                active_workspace   #595B5B #353836 #FDF6E3
                inactive_workspace #595B5B #00244c #EEE8D5
                binding_mode       #d5d2e2 #005296 #ffffff
                urgent_workspace   #005577 #FDF6E3 #E5201D
        }
}

########################
##  Modos redshift    ##
########################

bindsym $mod+Ctrl+r mode "$mode_redshift"
set $mode_redshift Temperatura de color: (a)uto, (r)eset, (2)500K, (3)000K, (4)000K, (5)000K
set $kill_redshift pkill -9 redshift;
mode "$mode_redshift" {
        bindsym a exec --no-startup-id "$kill_redshift redshift -P -t 5000:4000", mode "default"
        bindsym r exec --no-startup-id "$kill_redshift redshift -x", mode "default"
        bindsym 2 exec --no-startup-id "$kill_redshift redshift -P -O 2500", mode "default"
        bindsym 3 exec --no-startup-id "$kill_redshift redshift -P -O 3000", mode "default"
        bindsym 4 exec --no-startup-id "$kill_redshift redshift -P -O 4000", mode "default"
        bindsym 5 exec --no-startup-id "$kill_redshift redshift -P -O 5000", mode "default"
        bindsym Return mode "default"
        bindsym Escape mode "default"
}
